<!DOCTYPE html>
<html lang="ja">
	<head>
		<meta http-equiv="Content-type" content="text/html; charset=UTF-8">
		<title>テーブル定義書&#32;ダミー保険事務処理システム&#32;契約管理</title>
		<link rel="stylesheet" href="a5m2.css">
	</head>
	<body>
	<table border="1">
		<caption>テーブル情報</caption>
			<colgroup>
				<col width="115">
				<col width="180">
				<col width="115">
				<col width="180">
			</colgroup>
			<th>システム名</th>
			<td>ダミー保険事務処理システム&nbsp;</td>
			<th>作成者</th>
			<td>保険チーム&nbsp;</td>
		</tr>
		<tr>
			<th>サブシステム名</th>
			<td>契約管理&nbsp;</td>
			<th>作成日</th>
			<td>2021/09/26&nbsp;</td>
		</tr>
		<tr>
			<th>スキーマ名</th>
			<td>insurance_db&nbsp;</td>
			<th>更新日</th>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<th>論理テーブル名</th>
			<td>契約情報テーブル&nbsp;</td>
			<th>RDBMS&nbsp;</th>
			<td> 8.0.26&nbsp;</td>
		</tr>
		<tr>
			<th>物理テーブル名</th>
			<td>contracts&nbsp;</td>
			<th>&nbsp;</th>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td colspan="4"><b>概要：契約に関する情報を管理する</b><br></td>
		</tr>
	</table>

<br>
<br>
	<table border="1">
		<caption>カラム情報</caption>
			<colgroup>
				<col width="30">
				<col width="120">
				<col width="150">
				<col width="120">
				<col width="60">
				<col width="100">
				<col width="370">
			</colgroup>
		<tr>
			<th>No.</th>
			<th>論理名</th>
			<th>物理名</th>
			<th>データ型</th>
			<th>Not Null</th>
			<th>デフォルト</th>
			<th>概要</th>
		</tr>
		<tr>
			<td style="text-align:right;">1</td>
			<td>被保険者番号</td>
			<td>insured_person_id</td>
			<td>int&#32;unsigned</td>
			<td>Yes (PK)</td>
			<td></td>
			<td>被保険者情報に設定されたユニークな番号<br>
			    ※自動採番されるため、新規作成時はアプリ側での編集不要</td>
		</tr>
		<tr>
			<td style="text-align:right;">2</td>
			<td>契約番号</td>
			<td>contract_id</td>
			<td>smallint&#32;unsigned</td>
			<td>Yes (PK)</td>
			<td></td>
			<td>被保険者配下の契約を識別するために設定された番号<br><br>
			    【編集仕様】<br>
			    　１被保険者毎に以下のルールで設定する<br>
			    　　・１件目の登録時　　　　：10000を設定<br>
			    　　・２件目以降の登録時　：「契約番号の最大値＋1」を設定</td></td>
		</tr>
		<tr>
			<td style="text-align:right;">3</td>
			<td>契約履歴番号</td>
			<td>contract_history_id</td>
			<td>smallint&#32;unsigned</td>
			<td>Yes (PK)</td>
			<td></td>
			<td>被保険者配下の契約を複数履歴で管理する場合に備え、契約履歴を識別するために設定され番号<br><br>
			    【編集仕様】<br>
			    　１契約毎に以下のルールで設定する<br>
			    　　・１件目の登録時　　　　：10000を設定<br>
			    　　・２件目以降の登録時　：「契約履歴番号の最大値＋1」を設定</td>
		</tr>
		<tr>
			<td style="text-align:right;">4</td>
			<td>契約開始日</td>
			<td>contract_start_date</td>
			<td>varchar(8)</td>
			<td>Yes</td>
			<td></td>
			<td>契約が開始された日（加入日など）を管理<br>※YYYYMMDDで管理する</td>
		</tr>
		<tr>
			<td style="text-align:right;">5</td>
			<td>契約終了日</td>
			<td>contract_end_date</td>
			<td>varchar(8)</td>
			<td>Yes</td>
			<td></td>
			<td>契約が終了した日（解約日など）を管理<br>※YYYYMMDDで管理する。<br>　 新規加入時は「00000000」を設定する</td>
		</tr>
		<tr>
			<td style="text-align:right;">6</td>
			<td>契約終了事由</td>
			<td>contract_end_reason</td>
			<td>varchar(2)</td>
			<td>Yes</td>
			<td></td>
			<td>契約が終了した事由を管理<br><br>
			    【編集仕様】<br>
			    　新規加入時はSPACE。<br>　解約／取消時、下記いずれかのコード値を設定<br>
			    　　K0:解約<br>
			    　　K2:取消</td>
		</tr>
		<tr>
			<td style="text-align:right;">7</td>
			<td>契約満期日</td>
			<td>contract_maturity_date</td>
			<td>varchar(8)</td>
			<td>Yes</td>
			<td></td>
			<td>契約の満期日を管理<br>※YYYYMMDDで管理する<br><br>
			    【編集仕様】<br>
			    　定期保障：加入日から契約期間後の日付を設定<br>
			    　終身保障：9999-12-31を設定<br><br>
			    【具体例】<br>
			    　・加入日＝2020-01-01、契約期間：5年の場合、<br>　　満期日＝2024-12-31<br>
			    　・加入日＝2020-06-15、契約期間：5年の場合、<br>　　満期日＝2025-06-14<br></td>
		</tr>
		<tr>
			<td style="text-align:right;">8</td>
			<td>保障種類</td>
			<td>security_type</td>
			<td>varchar(2)</td>
			<td>Yes</td>
			<td></td>
			<td>契約の保障種類を管理<br><br>
			    【編集仕様】<br>
			    　下記いずれかのコード値を設定<br>
			    　　TC：定期医療<br>
			    　　TL：定期生命<br>
			    　　WC：終身医療<br>
			    　　WL：終身生命</td>
		</tr>
		<tr>
			<td style="text-align:right;">9</td>
			<td>加入年齢</td>
			<td>entry_age</td>
			<td>tinyint&#32;unsigned</td>
			<td>Yes</td>
			<td></td>
			<td>加入時の年齢を管理<br><br>
			    【編集仕様】<br>
			    　被保険者生年月日～加入日の期間により算出<br><br>
			    【具体例】<br>
			    　・被保険者生年月日＝1990-04-01、加入日＝2020-03-31の場合、<br>　　加入年齢＝29歳<br>
			    　・被保険者生年月日＝1990-04-01、加入日＝2020-04-01の場合、<br>　　加入年齢＝30歳<br>
			    　・被保険者生年月日＝1990-03-31、加入日＝2020-04-01の場合、<br>　　加入年齢＝30歳</td>
		</tr>
		<tr>
			<td style="text-align:right;">10</td>
			<td>払込方法</td>
			<td>payment_method</td>
			<td>varchar(1)</td>
			<td>Yes</td>
			<td></td>
			<td>契約の払込方法を管理<br><br>
			    【編集仕様】<br>
			    　下記いずれかのコード値を設定<br>
			    　　1:月払<br>
			    　　3:年払</td>
		</tr>
		<tr>
			<td style="text-align:right;">11</td>
			<td>保険金</td>
			<td>insurance_money</td>
			<td>int</td>
			<td>Yes</td>
			<td></td>
			<td>契約者に支払う保険金を管理<br><br>
			    【編集仕様】<br>
			    　・医療保障　：入院日額を設定<br>
			    　・生命保障　：死亡保険金（入力値×10000）を設定</td></td>
		</tr>
		<tr>
			<td style="text-align:right;">12</td>
			<td>掛金</td>
			<td>premium</td>
			<td>int</td>
			<td>Yes</td>
			<td></td>
			<td>契約者が払い込む掛金を管理</td>
		</tr>
		<tr>
			<td style="text-align:right;">13</td>
			<td>掛金払込期間</td>
			<td>premium_payment_term</td>
			<td>tinyint&#32;unsigned</td>
			<td>Yes</td>
			<td></td>
			<td>掛金を払い込む期間を管理<br>
			    【編集仕様】<br>
			    　・定期保障：<br>　　　契約期間を設定<br>
			    　・終身保障：<br>
			    　　　払込満了年齢が終身　⇒　「99」を設定<br>
			    　　　払込満了年齢が60歳　⇒　「60歳－加入年齢」を設定</td>
		</tr>
		<tr>
			<td style="text-align:right;">14</td>
			<td>契約期間</td>
			<td>contract_term</td>
			<td>tinyint&#32;unsigned</td>
			<td>Yes</td>
			<td></td>
			<td>契約期間を管理<br>
			    【編集仕様】<br>
			    　定期保障：契約期間を設定<br>
			    　終身保障：「99」を設定</td>
		</tr>
		<tr>
			<td style="text-align:right;">15</td>
			<td>払込満了年齢</td>
			<td>payment_expiration_age</td>
			<td>tinyint&#32;unsigned</td>
			<td>Yes</td>
			<td></td>
			<td>払込満了年齢を管理（終身保障のみ）<br>
			    【編集仕様】<br>
			    　・定期保障：<br>　　　zERoを設定<br>
			    　・終身保障：<br>
			    　　　払込満了年齢が終身　⇒　「99」を設定<br>
			    　　　払込満了年齢が60歳　⇒　「60」を設定</td>
		</tr>
		<tr>
			<td style="text-align:right;">16</td>
			<td>作成日</td>
			<td>create_at</td>
			<td>datetime</td>
			<td>&nbsp;</td>
			<td>CURRENT_TIMESTAMP</td>
			<td>データが作成された日を管理<br>※自動設定のため、アプリ側での編集不要</td>
		</tr>
		<tr>
			<td style="text-align:right;">17</td>
			<td>更新日</td>
			<td>update_at</td>
			<td>datetime&#32;on&#32;update&#32;CURRENT_TIMESTAMP</td>
			<td>&nbsp;</td>
			<td>CURRENT_TIMESTAMP</td>
			<td>データが作成・更新された日を管理<br>※自動設定のため、アプリ側での編集不要</td>
		</tr>
	</table>

<br>
<br>
	<table border="1">
		<caption>インデックス情報</caption>
			<colgroup>
				<col width="30">
				<col width="170">
				<col width="230">
				<col width="60">
				<col width="100">
			</colgroup>
		<tr>
			<th>No.</th>
			<th>インデックス名</th>
			<th>カラムリスト</th>
			<th>ユニーク</th>
			<th>備考</th>
		</tr>
		<tr>
			<td style="text-align:right;">1</td>
			<td>PRIMARY</td>
			<td>insured_person_id,contract_id,contract_history_id</td>
			<td>Yes</td>
			<td>&nbsp;</td>
		</tr>
	</table>

<br>
<br>
	<table border="1">
		<caption>制約情報</caption>
			<colgroup>
				<col width="30">
				<col width="170">
				<col width="90">
				<col width="300">
			</colgroup>
		<tr>
			<th>No.</th>
			<th>制約名</th>
			<th>種類</th>
			<th>制約定義</th>
		</tr>
		<tr>
			<td style="text-align:right;">1</td>
			<td>PRIMARY</td>
			<td>PRIMARY&#32;KEY</td>
			<td>insured_person_id,contract_id,contract_history_id</td>
		</tr>
	</table>

<br>
<br>
	<table border="1">
		<caption>外部キー情報</caption>
			<colgroup>
				<col width="30">
				<col width="120">
				<col width="160">
				<col width="120">
				<col width="160">
			</colgroup>
			<th>No.</th>
			<th>外部キー名</th>
			<th>カラムリスト</th>
			<th>参照先</th>
			<th>参照先カラムリスト</th>
		</tr>
		<tr>
			<td style="text-align:right;">1</td>
			<td>insurance_db.contracts_ibfk_1</td>
			<td>insured_person_id</td>
			<td>insurance_db.insured_persons</td>
			<td>insured_person_id</td>
		</tr>
	</table>

<br>
<br>
	<table border="1">
		<caption>外部キー情報(PK側)</caption>
			<colgroup>
				<col width="30">
				<col width="120">
				<col width="160">
				<col width="120">
				<col width="160">
			</colgroup>
		<tr>
			<th>No.</th>
			<th>外部キー名</th>
			<th>カラムリスト</th>
			<th>参照元</th>
			<th>参照元カラムリスト</th>
		</tr>
	</table>

<br>
<br>
	<table border="1">
		<caption>RDBMS固有の情報</caption>
			<colgroup>
				<col width="30">
				<col width="220">
				<col width="340">
			</colgroup>
		<tr>
			<th>No.</th>
			<th>プロパティ名</th>
			<th>プロパティ値</th>
		</tr>
		<tr>
			<td style="text-align:right;">1</td>
			<td>TABLE_CATALOG</td>
			<td>def</td>
		</tr>
		<tr>
			<td style="text-align:right;">2</td>
			<td>TABLE_SCHEMA</td>
			<td>insurance_db</td>
		</tr>
		<tr>
			<td style="text-align:right;">3</td>
			<td>TABLE_NAME</td>
			<td>contracts</td>
		</tr>
		<tr>
			<td style="text-align:right;">4</td>
			<td>TABLE_TYPE</td>
			<td>BASE&#32;TABLE&#32;</td>
		</tr>
		<tr>
			<td style="text-align:right;">5</td>
			<td>ENGINE</td>
			<td>InnoDB</td>
		</tr>
		<tr>
			<td style="text-align:right;">6</td>
			<td>VERSION</td>
			<td>10</td>
		</tr>
		<tr>
			<td style="text-align:right;">7</td>
			<td>ROW_FORMAT</td>
			<td>Dynamic&#32;&#32;&#32;</td>
		</tr>
		<tr>
			<td style="text-align:right;">8</td>
			<td>TABLE_ROWS</td>
			<td>0</td>
		</tr>
		<tr>
			<td style="text-align:right;">9</td>
			<td>AVG_ROW_LENGTH</td>
			<td>0</td>
		</tr>
		<tr>
			<td style="text-align:right;">10</td>
			<td>DATA_LENGTH</td>
			<td>16384</td>
		</tr>
		<tr>
			<td style="text-align:right;">11</td>
			<td>MAX_DATA_LENGTH</td>
			<td>0</td>
		</tr>
		<tr>
			<td style="text-align:right;">12</td>
			<td>INDEX_LENGTH</td>
			<td>0</td>
		</tr>
		<tr>
			<td style="text-align:right;">13</td>
			<td>DATA_FREE</td>
			<td>0</td>
		</tr>
		<tr>
			<td style="text-align:right;">14</td>
			<td>AUTO_INCREMENT</td>
			<td></td>
		</tr>
		<tr>
			<td style="text-align:right;">15</td>
			<td>CREATE_TIME</td>
			<td>2021/09/26&#32;13:17:50</td>
		</tr>
		<tr>
			<td style="text-align:right;">16</td>
			<td>UPDATE_TIME</td>
			<td>2022/01/16&#32;14:50:00</td>
		</tr>
		<tr>
			<td style="text-align:right;">17</td>
			<td>CHECK_TIME</td>
			<td></td>
		</tr>
		<tr>
			<td style="text-align:right;">18</td>
			<td>TABLE_COLLATION</td>
			<td>utf8mb4_0900_ai_ci</td>
		</tr>
		<tr>
			<td style="text-align:right;">19</td>
			<td>CHECKSUM</td>
			<td></td>
		</tr>
		<tr>
			<td style="text-align:right;">20</td>
			<td>CREATE_OPTIONS</td>
			<td></td>
		</tr>
		<tr>
			<td style="text-align:right;">21</td>
			<td>TABLE_COMMENT</td>
			<td>契約情報テーブル</td>
		</tr>
	</table>


	</body>
</html>
